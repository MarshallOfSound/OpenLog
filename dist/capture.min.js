var Logger=function(){this.l=window.location,this.SERVER=this.l.protocol+"//"+this.l.hostname+":4783/log",this.LOGGING_LEVELS={info:!0,warn:!0,error:!0};var b,c,d="openLogQueue",e=localStorage,f=document.getElementsByTagName("script"),g=this;for(this.o={error:console.error,info:console.info,log:console.log,warn:console.warn},this.queue=JSON.parse(e.getItem(d)||"[]"),e.removeItem(d),window.onbeforeunload=function(){e.setItem(d,JSON.stringify(g.queue))},setInterval(function(){g.sending||g.sendQueue.call(g)},1e3),b=0;b<f.length;b++){if(c=f[b].getAttribute("data-capture"),url=f[b].getAttribute("data-log-url"),r=f[b].getAttribute("data-restrict-to"),url&&(this.SERVER=url),c){for(c=c.split(" "),this.LOGGING_LEVELS={info:!1,warn:!1,error:!1},b=0;b<c.length;b++)this.set(c[b],!0);break}r&&(this.DOMAIN_RESTRICTION=r)}this.oneEquals=function(b,c){return!(!b||!c)&&(y=!1,a=b.split(" "),a.forEach(function(a){if(a===c)return void(y=!0)}),y)}};Logger.prototype={console:function(a){this.o.log.apply(console,[a])},error:function(){console.error.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},sendQueue:function(){if(this.queue.length>0){var a=new XMLHttpRequest,b=this;b.sending=!0,a.open("post",this.SERVER,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onload=function(){b.queue=[],b.sending=!1},a.onerror=function(){b.sending=!1},a.send("["+this.queue.join(", ")+"]")}},_send:function(a,b,c){var d=this.LOGGING_LEVELS[a]||!1,e=this.oneEquals(this.DOMAIN_RESTRICTION,this.l.hostname)||!this.DOMAIN_RESTRICTION;d&&e&&this.LOGGING_LEVELS[a]&&this.queue.push(JSON.stringify({type:a,message:b,trace:c||Error().trace,time:Date.now(),page:this.l.href}))},set:function(a,b){"undefined"!=typeof this.LOGGING_LEVELS[a]&&(this.LOGGING_LEVELS[a]=b)}};for(var Log=new Logger,types=["error","info","log","warn"],i=0;i<types.length;i++)!function(){var a=i;console[types[a]]=function(){Log._send(types[a],arguments,Error().stack),Log.o[types[a]].apply(this,arguments)}}();window.onerror=function(a,b,c,d,e){Log._send("error",a,e.stack)},window.Log=Log;